<div class="container">
    <br>
    <br>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <title>LED Toolkit</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <style>
            #myButton {
                padding: 10px 20px;
                background-color: red;
                color: white;
                border: none;
                cursor: pointer;
            }
        </style>
        <style>
            #resultBox {
                padding: 10px;
                border: 1px solid #ccc;
                background-color: #f9f9f9;
                margin-top: 20px;
                width: 100%;
                box-sizing: border-box;
            }
        </style>
        <style>
            .card-body-scrollable {
                max-height: 500px; /* Adjust height as needed */
                overflow-y: auto; /* Enable vertical scrolling */
            }
        </style>


    </head>
    <body>
        <center>
            <h1>Led Simulation Toolkit</h1>
            <br>
            <br>
            {% if submitted %}
                Led Test Succefully
            {% else %}
                <div class="form-group">
                    <form action="" method="POST" enctype="multipart/form-data">
                    
                        {% csrf_token %}
                        
                        {{ form.as_p }}
                        <input type="submit" value="Submit" class="btn btn-secondary">
                    
                    </form>
                </div>
                
            {% endif %}    
        
        
       
    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
          

    <div class="card bg-light mb-3" style="max-width: 350px;">
        <div class="card-body-scrollable">
            <br>
            <h3>Previous Simulations</h3>
            <br>
            <center><button  align-items="center"; style="max-width: 250px;"class="btn btn-secondary" id="load-led-keys">Load Simulations</button></center>
            <br>
            
            <ul id="led-keys-list" class="list-group"></ul>
        </div>
        
    </div>
    
    <script>
        $(document).ready(function(){
            $('#load-led-keys').click(function(){
                $.ajax({
                    url: '{% url "simulation_list" %}',
                    method: 'GET',
                    success: function(data) {
                        var ledKeysList = $('#led-keys-list');
                        ledKeysList.empty();
                        data.led_keys.forEach(function(ledKey){
                            // Create a clickable link for each led key
                            var listItem = $('<li style="max-width: 350px; " class="list-group-item"></li> ');
                            var link = $('<a style="color: darkslategray;"></a>').attr('href', '/led_result/' + ledKey).text('Simulation Number: ' + ledKey);
                            listItem.append(link);
                            ledKeysList.append(listItem);
                        });
                    }
                });
            });
            

        });
    </script>
        </center> 
    </body>
    
</div>